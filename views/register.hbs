<!DOCTYPE html>
<html>
<head>
  <title>Index</title>
  <link rel="stylesheet" href="/css/index.css">
  <link rel="stylesheet" href="/css/login.css">
  <script type="text/javascript" src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script src="/js/login.js"></script>
  <script>
        $(document).ready(function () {
        /*
            attach the event `keyup` to the html element where id = `idNum`
            this html element is an `<input>` element
            this event activates when the user releases a key on the keyboard
        */
        $('#username').keyup(function () {

            // get the value entered the user in the `<input>` element

              var username = $('#username').val();

            /*
                send an HTTP GET request using JQuery AJAX
                the first parameter is the path in our server
                which is defined in `../../routes/routes.js`
                the server will execute the function getCheckID()
                defined in `../../controllers/signupController.js`
                the second parameter passes the variable `idNum`
                as the value of the field `idNum`
                to the server
                the last parameter executes a callback function
                when the server sent a response
            */
            $.get('/getCheckUsername', {username: username}, function (result) {
                if(result.username == username) {
                  $('#username').css('background-color', '#9CD9BF');
                  $('#error').html('&nbsp');
                  $('#submit').prop('disabled', false);
                }

                else {
                  $('#username').css('background-color', '#FF6A55');
                  $('#error').text('Invalid Username');
                }
            });
        });
        $('#usernamereg').keyup(function () {

            // get the value entered the user in the `<input>` element

              var username = $('#usernamereg').val();

            /*
                send an HTTP GET request using JQuery AJAX
                the first parameter is the path in our server
                which is defined in `../../routes/routes.js`
                the server will execute the function getCheckID()
                defined in `../../controllers/signupController.js`
                the second parameter passes the variable `idNum`
                as the value of the field `idNum`
                to the server
                the last parameter executes a callback function
                when the server sent a response
            */
            $.get('/getCheckUsername', {username: username}, function (result) {
                if(result.username == username) {
                  $('#usernamereg').css('background-color', '#FF6A55');
                  $('#error').text('Existing Username');
                }

                else if (result.username != username) {
                  $('#usernamereg').css('background-color', '#9CD9BF');
                  $('#error').html('&nbsp');
                  $('#submit2').prop('disabled', false);
                }
            });
        });
    });
  </script>
</head>
<body>

<!--<form method="post" action="/register">-->

<div id="midbox">
    <div id="leftbox">
      <img id="main_logo" src="images/hiku-big.png" style="width: 256px;">
      <div class="body_text" id="text_dict">/h√Æ-koo/</div>
      <div class="body_text" id="text_desc">"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."</div>

      <a href="/" id="back_btn">< Back</a>
    </div>

    <div id="rightbox">
      <form method="post">
        <div class="logincontainer">
            <div style="font-size: 22px"> Username </div>
            <input class="text_field"type="text" id="usernamereg" name="username" required>
            <div style="font-size: 22px"> Email Address </div>
            <input class="text_field"type="text">
            <div style="font-size: 22px"> Password </div>
            <input class="text_field"type="password" name="password" required>
            <div style="font-size: 22px"> Confirm Password </div>
            <input class="text_field"type="password" style="margin-bottom: 20px">
            <button class="bottombutton" id="submit2" type="submit" disabled><p style="margin-top:6px">Register</p></button>
        </div>
      </form>

    </div>
</div>




</body>
</html>
